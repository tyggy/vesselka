"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{5805:function(e,n,t){t.r(n),t.d(n,{VesselMapLeaflet:function(){return O}});var r,l,o,i,a,u,c,s,f=t(7437),d=t(2265);let p=(0,d.createContext)(null),h=p.Provider;function m(){let e=(0,d.useContext)(p);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var y=t(759);function g(){return(g=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}let v=(0,d.forwardRef)(function({bounds:e,boundsOptions:n,center:t,children:r,className:l,id:o,placeholder:i,style:a,whenReady:u,zoom:c,...s},f){let[p]=(0,d.useState)({className:l,id:o,style:a}),[m,v]=(0,d.useState)(null);(0,d.useImperativeHandle)(f,()=>m?.map??null,[m]);let x=(0,d.useCallback)(r=>{if(null!==r&&null===m){let l=new y.Map(r,s);null!=t&&null!=c?l.setView(t,c):null!=e&&l.fitBounds(e,n),null!=u&&l.whenReady(u),v(Object.freeze({__version:1,map:l}))}},[]);(0,d.useEffect)(()=>()=>{m?.map.remove()},[m]);let b=m?d.createElement(h,{value:m},r):i??null;return d.createElement("div",g({},p,{ref:x}),b)});var x=t(4887);function b(e,n,t){return Object.freeze({instance:e,context:n,container:t})}function w(e,n){return null==n?function(n,t){let r=(0,d.useRef)();return r.current||(r.current=e(n,t)),r}:function(t,r){let l=(0,d.useRef)();l.current||(l.current=e(t,r));let o=(0,d.useRef)(t),{instance:i}=l.current;return(0,d.useEffect)(function(){o.current!==t&&(n(i,t,o.current),o.current=t)},[i,t,r]),l}}function j(e,n){let t=(0,d.useRef)(n);(0,d.useEffect)(function(){n!==t.current&&null!=e.attributionControl&&(null!=t.current&&e.attributionControl.removeAttribution(t.current),null!=n&&e.attributionControl.addAttribution(n)),t.current=n},[e,n])}function k(e,n){let t=(0,d.useRef)();(0,d.useEffect)(function(){return null!=n&&e.instance.on(n),t.current=n,function(){null!=t.current&&e.instance.off(t.current),t.current=null}},[e,n])}function C(e,n){let t=e.pane??n.pane;return t?{...e,pane:t}:e}function S(e,n){(0,d.useEffect)(function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){n.layerContainer?.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}let z=(r=w(function({url:e,...n},t){return b(new y.TileLayer(e,C(n,t)),t)},function(e,n,t){!function(e,n,t){let{opacity:r,zIndex:l}=n;null!=r&&r!==t.opacity&&e.setOpacity(r),null!=l&&l!==t.zIndex&&e.setZIndex(l)}(e,n,t);let{url:r}=n;null!=r&&r!==t.url&&e.setUrl(r)}),l=function(e){let n=m(),t=r(C(e,n),n);return j(n.map,e.attribution),k(t.current,e.eventHandlers),S(t.current,n),t},(0,d.forwardRef)(function(e,n){let{instance:t}=l(e).current;return(0,d.useImperativeHandle)(n,()=>t),null})),R=(o=w(function({center:e,children:n,...t},r){var l;let o=new y.CircleMarker(e,t);return b(o,(l={overlayContainer:o},Object.freeze({...r,...l})))},function(e,n,t){n.center!==t.center&&e.setLatLng(n.center),null!=n.radius&&n.radius!==t.radius&&e.setRadius(n.radius)}),i=function(e){let n=m(),t=o(C(e,n),n);return k(t.current,e.eventHandlers),S(t.current,n),function(e,n){let t=(0,d.useRef)();(0,d.useEffect)(function(){if(n.pathOptions!==t.current){let r=n.pathOptions??{};e.instance.setStyle(r),t.current=r}},[e,n])}(t.current,e),t},(0,d.forwardRef)(function(e,n){let{instance:t,context:r}=i(e).current;return(0,d.useImperativeHandle)(n,()=>t),null==e.children?null:d.createElement(h,{value:r},e.children)})),E=(a=function(e,n){return b(new y.Popup(e,n.overlayContainer),n)},u=function(e,n,{position:t},r){(0,d.useEffect)(function(){let{instance:l}=e;function o(e){e.popup===l&&(l.update(),r(!0))}function i(e){e.popup===l&&r(!1)}return n.map.on({popupopen:o,popupclose:i}),null==n.overlayContainer?(null!=t&&l.setLatLng(t),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){n.map.off({popupopen:o,popupclose:i}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(l)}},[e,n,r,t])},c=w(a),s=function(e,n){let t=m(),r=c(C(e,t),t);return j(t.map,e.attribution),k(r.current,e.eventHandlers),u(r.current,t,e,n),r},(0,d.forwardRef)(function(e,n){let[t,r]=(0,d.useState)(!1),{instance:l}=s(e,r).current;(0,d.useImperativeHandle)(n,()=>l),(0,d.useEffect)(function(){t&&l.update()},[l,t,e.children]);let o=l._contentNode;return o?(0,x.createPortal)(e.children,o):null}));var I=t(2701);function L(e){let{vessel:n}=e,t=m().map,r=(0,d.useRef)(null);return(0,d.useEffect)(()=>{if((null==n?void 0:n.lat)!=null&&(null==n?void 0:n.lon)!=null){let e=n.mtShipId;e!==r.current&&(r.current=e,t.flyTo([n.lat,n.lon],16,{duration:.8}))}},[n,t]),null}function O(e){let{vessels:n,selectedVessel:t,onSelectVessel:r}=e,l=n.filter(e=>null!=e.lat&&null!=e.lon);return(0,f.jsxs)(v,{center:[17.905,-62.865],zoom:14,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,zoomControl:!1,children:[(0,f.jsx)(z,{attribution:'\xa9 <a href="https://carto.com/">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),(0,f.jsx)(L,{vessel:t}),l.map(e=>{var n,l;let o=(null==t?void 0:t.mtShipId)===e.mtShipId,i=o?"#fbbf24":(0,I.z2)(e.speed),a=(0,I.tB)(e);return(0,f.jsx)(R,{center:[e.lat,e.lon],radius:(l=e.length)<=0||l<15?4:l<30?5:l<50?7:l<80?9:l<100?11:13,pathOptions:{color:o?"#fbbf24":"#fff",fillColor:i,fillOpacity:o?1:.75,weight:o?3:a?2:1},eventHandlers:{click:()=>r(e)},children:(0,f.jsx)(E,{children:(0,f.jsxs)("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',minWidth:220,lineHeight:1.5,padding:2},children:[e.photoUrl&&(0,f.jsx)("div",{style:{height:90,margin:"-8px -8px 8px -8px",background:"url(".concat(e.photoUrl,") center/cover no-repeat"),backgroundColor:"#e2e8f0",borderRadius:"4px 4px 0 0"}}),(0,f.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:4},children:[(0,f.jsx)("div",{style:{fontSize:15,fontWeight:700},children:e.name}),e.length>0&&(0,f.jsxs)("span",{style:{fontSize:12,fontWeight:700,color:"#666",background:"#f1f5f9",padding:"1px 6px",borderRadius:8},children:[e.length,"m"]})]}),(0,f.jsxs)("div",{style:{fontSize:12,color:"#555",marginBottom:6},children:[e.shipType||e.type,e.builder&&(0,f.jsxs)("span",{children:[" \xb7 ",e.builder]}),e.yearBuilt>0&&(0,f.jsxs)("span",{children:[" \xb7 ",e.yearBuilt]}),e.flag&&(0,f.jsxs)("span",{style:{fontSize:11,color:"#888"},children:[" ","\xb7 ",e.flag]})]}),(0,f.jsxs)("div",{style:{fontSize:13,marginBottom:4},children:[(0,f.jsx)("span",{style:{display:"inline-block",width:8,height:8,borderRadius:"50%",background:(0,I.z2)(e.speed),marginRight:6,verticalAlign:"middle"}}),(0,I.IZ)(e.speed),null!=e.speed&&(0,f.jsxs)("span",{style:{marginLeft:8},children:[e.speed," kn"]}),null!=e.heading&&e.heading>0&&(0,f.jsxs)("span",{style:{marginLeft:8},children:[e.heading,"\xb0"]})]}),(null===(n=e.owner)||void 0===n?void 0:n.name)&&(0,f.jsxs)("div",{style:{fontSize:13,borderTop:"1px solid #eee",paddingTop:4,marginTop:4},children:[(0,f.jsx)("div",{style:{fontWeight:600,color:"#2563eb"},children:e.owner.wikipedia?(0,f.jsx)("a",{href:e.owner.wikipedia,target:"_blank",rel:"noopener noreferrer",style:{color:"inherit",textDecoration:"none"},children:e.owner.name}):e.owner.name}),e.owner.business&&(0,f.jsx)("div",{style:{fontSize:11,color:"#888"},children:e.owner.business})]}),(0,f.jsxs)("div",{style:{display:"flex",gap:10,marginTop:6,paddingTop:4,borderTop:"1px solid #eee"},children:[(0,f.jsx)("a",{href:"https://www.marinetraffic.com/en/ais/details/ships/shipid:".concat(e.mtShipId),target:"_blank",rel:"noopener noreferrer",style:{fontSize:11,color:"#3b82f6",textDecoration:"none",fontWeight:600},children:"MT"}),e.imo&&(0,f.jsx)("a",{href:"https://www.vesselfinder.com/?imo=".concat(e.imo),target:"_blank",rel:"noopener noreferrer",style:{fontSize:11,color:"#3b82f6",textDecoration:"none",fontWeight:600},children:"VF"}),(0,f.jsx)("a",{href:e.wikipedia||"https://www.google.com/search?q=".concat(encodeURIComponent(e.name+" yacht")),target:"_blank",rel:"noopener noreferrer",style:{fontSize:11,color:e.wikipedia?"#3b82f6":"#999",textDecoration:"none",fontWeight:600},children:e.wikipedia?"Wiki":"Search"})]})]})})},e.mtShipId)})]})}}}]);